<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>ZLAGODA ‚Äî –ó–≤—ñ—Ç–∏</title>

  <!-- Fonts & Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-iconic-font/2.2.0/css/material-design-iconic-font.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,300,600,700">

  <!-- Bootstrap + Custom Styles -->
  <link rel="stylesheet" href="static/bootstrap.min.css">
  <link rel="stylesheet" href="static/style.css">
  <link rel="stylesheet" href="static/sidebar-menu.css">
  <link rel="stylesheet" href="static/custom.css">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/5/w3.css">

  <style>
    @media (min-width: 992px) {
      #mySidebar {
        display: block !important;
        width: 200px;
        position: fixed;
        height: 100%;
        z-index: 1000;
      }
      #main {
        margin-left: 250px;
      }
      #openNav {
        display: none !important;
      }
    }

    @media (max-width: 991px) {
      #main {
        margin-left: 0;
      }
    }

    table {
      border-collapse: collapse;
      margin-top: 20px;
      width: 100%;
    }

    th, td {
      border: 1px solid #999;
      padding: 8px;
      text-align: left;
    }

    th {
      background-color: #eee;
    }

    @media print {
      button, .no-print, .w3-sidebar {
        display: none !important;
      }
      #main {
        margin: 0 !important;
      }
    }
  </style>

</head>
<body class="tooltips">

<!-- Sidebar -->
<!-- Sidebar -->
<!-- Sidebar -->
<!-- Sidebar -->
<div id="mySidebar"
     class="w3-sidebar w3-bar-block w3-card w3-animate-left w3-light-grey"
     style="display: none;">
  <button class="w3-bar-item w3-button w3-large w3-hide-large" onclick="w3_close()">‚úï Close</button>

  <!-- Workers (—Ç—ñ–ª—å–∫–∏ –º–µ–Ω–µ–¥–∂–µ—Ä) -->
  <a href="/manage-employee" class="w3-bar-item w3-button role-manager">Workers</a>

  <!-- Manage Products (—ñ –º–µ–Ω–µ–¥–∂–µ—Ä, —ñ –∫–∞—Å–∏—Ä) -->
  <a href="/manage_product"
     class="w3-bar-item w3-button role-manager role-cashier">
    Manage Products
  </a>

  <!-- Store Products (—ñ –º–µ–Ω–µ–¥–∂–µ—Ä, —ñ –∫–∞—Å–∏—Ä) -->
  <a href="/manage_store_product"
     class="w3-bar-item w3-button role-manager role-cashier">
    Store Products
  </a>

  <!-- Categories (—Ç—ñ–ª—å–∫–∏ –º–µ–Ω–µ–¥–∂–µ—Ä) -->
  <a href="/manage_category" class="w3-bar-item w3-button role-manager">
    Categories
  </a>

  <!-- Customers (—ñ –º–µ–Ω–µ–¥–∂–µ—Ä, —ñ –∫–∞—Å–∏—Ä) -->
  <a href="/manage_customer"
     class="w3-bar-item w3-button role-manager role-cashier">
    Customers
  </a>

  <!-- Checks (—ñ –º–µ–Ω–µ–¥–∂–µ—Ä, —ñ –∫–∞—Å–∏—Ä) -->
  <a href="/manage_check"
     class="w3-bar-item w3-button role-manager role-cashier">
    Checks
  </a>

  <!-- Reports (—Ç—ñ–ª—å–∫–∏ –º–µ–Ω–µ–¥–∂–µ—Ä) -->
  <a href="/reports" class="w3-bar-item w3-button role-manager">Reports</a>
</div>




<!-- Main Content -->
<div id="main">
  <div class="container">
    <div class="right content-page">
      <div class="body content rows scroll-y">
        <div class="box-info full">
          <h2 class="no-print">–ó–≤—ñ—Ç–∏</h2>

          <!-- Buttons -->
          <div class="no-print">
            <button onclick="loadReport('employees')" class="btn btn-default">üßç –ü—Ä–∞—Ü—ñ–≤–Ω–∏–∫–∏</button>
            <button onclick="loadReport('customers')" class="btn btn-default">ü™™ –ö–ª—ñ—î–Ω—Ç–∏</button>
            <button onclick="loadReport('categories')" class="btn btn-default">üóÇÔ∏è –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó</button>
            <button onclick="loadReport('products')" class="btn btn-default">üì¶ –¢–æ–≤–∞—Ä–∏</button>
            <button onclick="loadReport('store-products')" class="btn btn-default">üõí –¢–æ–≤–∞—Ä–∏ —É –º–∞–≥–∞–∑–∏–Ω—ñ</button>
            <button onclick="loadReport('receipts')" class="btn btn-default">üßæ –ß–µ–∫–∏</button>
            <button onclick="printReport()" class="btn btn-primary">üñ®Ô∏è –î—Ä—É–∫ –∑–≤—ñ—Ç—É</button>
          </div>

          <!-- Report Title -->
          <h3 id="report-title" class="mt-4"></h3>

          <!-- Output -->
          <div id="report-output" class="mt-3"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Scripts -->
<script src="js/package/jquery.min.js"></script>
<script src="js/package/bootstrap.min.js"></script>

<script>
  fetch('/api/employee_info', {
  method: 'GET',
  credentials: 'include'
})
.then(res => {
  if (!res.ok) {
    if (res.status === 401) window.location.href = '/login.html';
    throw new Error('Not authorized');
  }
  return res.json();
})
.then(data => {
  const role = data.empl_role.toLowerCase();

  // –°—Ö–æ–≤–∞—Ç–∏ –≤—Å—ñ –≤–∫–ª–∞–¥–∫–∏ —Å–ø–æ—á–∞—Ç–∫—É
  document.querySelectorAll('.role-manager, .role-cashier')
    .forEach(el => el.style.display = 'none');

  // –ü–æ–∫–∞–∑–∞—Ç–∏ –ª–∏—à–µ —Ç—ñ, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å —Ä–æ–ª—ñ
  document.querySelectorAll(`.role-${role}`)
    .forEach(el => el.style.display = 'block');

  // –ü–æ–∫–∞–∑–∞—Ç–∏ —Å–∞–º —Å–∞–π–¥–±–∞—Ä
  document.getElementById('mySidebar').style.display = 'block';
})
.catch(err => {
  console.error('Role fetch error:', err);
});


  function w3_open() {
    document.getElementById('mySidebar').style.display = 'block';
    document.getElementById('main').style.marginLeft = '250px';
    document.getElementById('openNav').style.display = 'none';
  }
  function w3_close() {
    document.getElementById('mySidebar').style.display = 'none';
    document.getElementById('main').style.marginLeft = '0';
    document.getElementById('openNav').style.display = 'inline-block';
  }
</script>


</body>
</html>
